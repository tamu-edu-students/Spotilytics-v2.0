Using the default profile...
Feature: Saved Shows
  As a user
  I want to manage my saved shows
  So that I can keep track of podcasts I like

  Background:                       # features/saved_shows.feature:6
D, [2025-11-26T06:16:14.403296 #7192] DEBUG -- omniauth: (spotify) Callback phase initiated.
E, [2025-11-26T06:16:14.406316 #7192] ERROR -- omniauth: (spotify) Authentication failure! csrf_detected: OmniAuth::Strategies::OAuth2::CallbackError, csrf_detected | CSRF detected
    Given I am logged in to Spotify # features/step_definitions/spotify_steps.rb:1

  Scenario: View saved shows                   # features/saved_shows.feature:9
    Given I have saved shows                   # features/step_definitions/spotify_steps.rb:23
    When I visit the saved shows page          # features/step_definitions/spotify_steps.rb:80
    Then I should see a list of my saved shows # features/step_definitions/spotify_steps.rb:88
      expected to find text "Saved Show" in "Home\nLogin with Spotify\nPlease sign in with Spotify first.\nWelcome to Spotilytics\nDiscover Your Sound\nAccess your stats anytime, anywhere, at your fingertips. Spotilytics is an all-in-one web application for spotify users to view and access their spotify account statistics whenever and wherever they want. Curious about your top tracks this year or your most listened to artist? Look no further, we have you covered.\nGet Started Now\nOur Contributors\nAurora Jitrskul\nDeveloper\nPablo Pineda\nDeveloper\nAditya Vellampalli\nDeveloper\nSpoorthy Raghavendra\nDeveloper\n© Spotilytics 2025" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/spotify_steps.rb:89:in `"I should see a list of my saved shows"'
      features/saved_shows.feature:12:in `I should see a list of my saved shows'
    And I should see pagination controls       # features/step_definitions/spotify_steps.rb:96

  Scenario: Search and save a show                      # features/saved_shows.feature:15
D, [2025-11-26T06:16:16.531288 #7192] DEBUG -- omniauth: (spotify) Callback phase initiated.
E, [2025-11-26T06:16:16.531672 #7192] ERROR -- omniauth: (spotify) Authentication failure! csrf_detected: OmniAuth::Strategies::OAuth2::CallbackError, csrf_detected | CSRF detected
    When I visit the saved shows page                   # features/step_definitions/spotify_steps.rb:80
    And I click "Find New Shows"                        # features/step_definitions/auth_steps.rb:38
      Unable to find link or button "Find New Shows" (Capybara::ElementNotFound)
      ./features/step_definitions/auth_steps.rb:39:in `"I click {string}"'
      features/saved_shows.feature:17:in `I click "Find New Shows"'
    And I search for "News"                             # features/step_definitions/spotify_steps.rb:104
    Then I should see search results for "News"         # features/step_definitions/spotify_steps.rb:109
    When I click "Save to Library" for the first result # features/step_definitions/spotify_steps.rb:120
    Then I should see "Show saved to your library"      # features/step_definitions/auth_steps.rb:54

  Scenario: Remove a saved show                          # features/saved_shows.feature:23
D, [2025-11-26T06:16:16.690483 #7192] DEBUG -- omniauth: (spotify) Callback phase initiated.
E, [2025-11-26T06:16:16.690848 #7192] ERROR -- omniauth: (spotify) Authentication failure! csrf_detected: OmniAuth::Strategies::OAuth2::CallbackError, csrf_detected | CSRF detected
    Given I have saved shows                             # features/step_definitions/spotify_steps.rb:23
    When I visit the saved shows page                    # features/step_definitions/spotify_steps.rb:80
    And I click "Remove from Library" for the first show # features/step_definitions/spotify_steps.rb:128
      expected to find button that is not disabled with title Remove from Library at least 1 time but there were no matches (Capybara::ExpectationNotMet)
      ./features/step_definitions/spotify_steps.rb:130:in `"I click {string} for the first show"'
      features/saved_shows.feature:26:in `I click "Remove from Library" for the first show'
    Then I should see "Show removed from your library"   # features/step_definitions/auth_steps.rb:54

  Scenario: Empty state                                 # features/saved_shows.feature:29
D, [2025-11-26T06:16:16.753259 #7192] DEBUG -- omniauth: (spotify) Callback phase initiated.
E, [2025-11-26T06:16:16.753592 #7192] ERROR -- omniauth: (spotify) Authentication failure! csrf_detected: OmniAuth::Strategies::OAuth2::CallbackError, csrf_detected | CSRF detected
    Given I have no saved shows                         # features/step_definitions/spotify_steps.rb:43
    When I visit the saved shows page                   # features/step_definitions/spotify_steps.rb:80
    Then I should see "You haven't saved any shows yet" # features/step_definitions/auth_steps.rb:54
      expected to find text "You haven't saved any shows yet" in "Home\nLogin with Spotify\nPlease sign in with Spotify first.\nWelcome to Spotilytics\nDiscover Your Sound\nAccess your stats anytime, anywhere, at your fingertips. Spotilytics is an all-in-one web application for spotify users to view and access their spotify account statistics whenever and wherever they want. Curious about your top tracks this year or your most listened to artist? Look no further, we have you covered.\nGet Started Now\nOur Contributors\nAurora Jitrskul\nDeveloper\nPablo Pineda\nDeveloper\nAditya Vellampalli\nDeveloper\nSpoorthy Raghavendra\nDeveloper\n© Spotilytics 2025" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/auth_steps.rb:55:in `"I should see {string}"'
      features/saved_shows.feature:32:in `I should see "You haven't saved any shows yet"'

Failing Scenarios:
cucumber features/saved_shows.feature:9 # Scenario: View saved shows
cucumber features/saved_shows.feature:15 # Scenario: Search and save a show
cucumber features/saved_shows.feature:23 # Scenario: Remove a saved show
cucumber features/saved_shows.feature:29 # Scenario: Empty state

4 scenarios (4 failed)
21 steps (4 failed, 6 skipped, 11 passed)
0m2.629s
┌──────────────────────────────────────────────────────────────────────────────┐
│ Share your Cucumber Report with your team at https://reports.cucumber.io     │
│                                                                              │
│ Command line option:    --publish                                            │
│ Environment variable:   CUCUMBER_PUBLISH_ENABLED=true                        │
│ cucumber.yml:           default: --publish                                   │
│                                                                              │
│ More information at https://cucumber.io/docs/cucumber/environment-variables/ │
│                                                                              │
│ To disable this message, specify CUCUMBER_PUBLISH_QUIET=true or use the      │
│ --publish-quiet option. You can also add this to your cucumber.yml:          │
│ default: --publish-quiet                                                     │
└──────────────────────────────────────────────────────────────────────────────┘
Stopped processing SimpleCov as a previous error not related to SimpleCov has been detected
Coverage report generated for Cucumber to C:/Users/prade/OneDrive/Documents/Spotilytics-v2.0/coverage/cucumber.
Line Coverage: 11.71% (50 / 427)
Branch Coverage: 100.0% (0 / 0)
